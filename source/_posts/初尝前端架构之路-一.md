---
title: 初尝前端架构之路(一)
tags:
  - 前端
  - 架构
originContent: >-
  ### 开场小白：

      前端架构之路，路漫漫其修远兮。该如何确定自己前行的方向，该如果把控每一步的轻重缓急。对于自己的前端架构之路，充满了期待和些许的迷茫。

      三人行必有我师焉！遵循前辈的脚印，是自己行进前端架构之路的指向标。
  ### 所以，前端架构的要点有哪些点呢


  自我总结如下：


  -     学习前端框架

  -     学习前端工程化

  -     学习前端性能优化

  -     学习前端完全领域防范

  -     架构演进(研究方向包括前端数据保护、前端代码混淆、前端执行环境监测等）


  ### 前端安全领域防范


  随着互联网的发达，各种 Web
  端的应用功能越来越多，架构设计也变得越来越复杂。但是随着应用功能越来越多的同时，随之而来的就是各种网络安全的问题。如何保护自家产品不被黑客攻击？用户信息不被黑客获取？作为前端开发行业的我们也逃不开这个问题。所以有必要简单了解一下Web
  前端安全以及如何防范。


  “安全”是个很大的话题，各种安全问题的类型也是种类繁多。如果我们把安全问题按照所发生的区域来进行分类的话，那么所有发生在后端服务器、应用、服务当中的安全问题就是“后端安全问题”，所有发生在浏览器、单页面应用、Web
  页面当中的安全问题则算是“前端安全问题”。当我们下面在谈论“前端安全问题”的时候，我们说的是发生在浏览器、前端应用当中，或者通常由前端开发工程师来对其进行修复的安全问题。


  - "研究如何保护前端数据，增加前端代码逆向的难度，以及对恶意的执行环境进行检测，最终形成一个立体化的业务安全防御体系。" 


  ::: hljs-right

   ---腾讯 高级前端工程师/刘忠正

  :::


  #### 前端安全主要会面临哪些问题？有什么样的技术手段进行对抗呢？


  众所周知通用前端会面临诸如 XSS、CSRF
  这样的安全风险，这种安全问题通常危害很大，需要研发同学有一些安全意识去防范。当然很多流程上的缺陷也会带来业务安全问题，但这不属于前端需要重点关注的领域。在业务安全前端领域，爬虫、脚本批量操作才是我们面临最大的问题，我们需要去识别当前操作是正常人还是机器行为。常规的方式是用图形验证码，也就是做图灵测试，但在机器学习盛行的大背景下，图形验证码简直不堪一击，现阶段主流的方案是通过收集用户行为和环境信息构建出多维模型对用户进行精准识别，具体到前端则是采集各种模型需要的数据，并通过加密、混淆、虚拟机等方式保护前端代码不被逆向或篡改。


  #### 前端代码保护有哪些方式

  首先需要给大家一个客观的认识，类似 Uglify
  的代码压缩并不是很好的代码保护手段，因此普遍认为代码压缩不属于代码保护的一部分，代码压缩只是一种代码优化。前端代码保护大致有两个流派，一个是以语法树变换为基础的混淆保护，一个是以构建私有执行环境为思路的虚拟机保护，谷歌则属于后者。代码混淆的效果因混淆器的负责程度而不同，基础级别的混淆器混淆出来的代码也很容易被逆向，而虚拟机保护的抗逆向效果好，其原理是在
  JavaScript 的执行环境之上再设计构建一个虚拟机，所有原有业务逻辑的 JavaScript 代码均转换为该虚拟机可识别的字节码，复杂度较高效果好。


  1. 业务安全对抗背景

  （1） 业务安全背景

  （2）恶意分类

  （3）图像对抗的脆弱性

  2. 前端解决方案

  （1）前端数据保护

  （2）前端代码保护

  （3）字面量混淆

  （4）流程混淆

  （5）调试检测

  3. 执行环境检测 
       Node.js 环境检测
  4. 模拟器环境检测
      动态混淆技术
categories:
  - 专栏
  - 前端
toc: true
date: 2019-04-20 15:46:31
---

### 开场小白：

   前端架构之路，路漫漫其修远兮。该如何确定自己前行的方向，该如果把控每一步的轻重缓急。对于自己的前端架构之路，充满了期待和些许的迷茫。

   三人行必有我师焉！遵循前辈的脚印，是自己行进前端架构之路的指向标。
### 所以，前端架构的要点有哪些点呢

自我总结如下：

-     学习前端框架
-     学习前端工程化
-     学习前端性能优化
-     学习前端完全领域防范
-     架构演进(研究方向包括前端数据保护、前端代码混淆、前端执行环境监测等）

### 前端安全领域防范

随着互联网的发达，各种 Web 端的应用功能越来越多，架构设计也变得越来越复杂。但是随着应用功能越来越多的同时，随之而来的就是各种网络安全的问题。如何保护自家产品不被黑客攻击？用户信息不被黑客获取？作为前端开发行业的我们也逃不开这个问题。所以有必要简单了解一下Web 前端安全以及如何防范。

“安全”是个很大的话题，各种安全问题的类型也是种类繁多。如果我们把安全问题按照所发生的区域来进行分类的话，那么所有发生在后端服务器、应用、服务当中的安全问题就是“后端安全问题”，所有发生在浏览器、单页面应用、Web 页面当中的安全问题则算是“前端安全问题”。当我们下面在谈论“前端安全问题”的时候，我们说的是发生在浏览器、前端应用当中，或者通常由前端开发工程师来对其进行修复的安全问题。

- "研究如何保护前端数据，增加前端代码逆向的难度，以及对恶意的执行环境进行检测，最终形成一个立体化的业务安全防御体系。" 

::: hljs-right

 ---腾讯 高级前端工程师/刘忠正

:::



#### 前端安全主要会面临哪些问题？有什么样的技术手段进行对抗呢？

众所周知通用前端会面临诸如 XSS、CSRF 这样的安全风险，这种安全问题通常危害很大，需要研发同学有一些安全意识去防范。当然很多流程上的缺陷也会带来业务安全问题，但这不属于前端需要重点关注的领域。在业务安全前端领域，爬虫、脚本批量操作才是我们面临最大的问题，我们需要去识别当前操作是正常人还是机器行为。常规的方式是用图形验证码，也就是做图灵测试，但在机器学习盛行的大背景下，图形验证码简直不堪一击，现阶段主流的方案是通过收集用户行为和环境信息构建出多维模型对用户进行精准识别，具体到前端则是采集各种模型需要的数据，并通过加密、混淆、虚拟机等方式保护前端代码不被逆向或篡改。

#### 前端代码保护有哪些方式
首先需要给大家一个客观的认识，类似 Uglify 的代码压缩并不是很好的代码保护手段，因此普遍认为代码压缩不属于代码保护的一部分，代码压缩只是一种代码优化。前端代码保护大致有两个流派，一个是以语法树变换为基础的混淆保护，一个是以构建私有执行环境为思路的虚拟机保护，谷歌则属于后者。代码混淆的效果因混淆器的负责程度而不同，基础级别的混淆器混淆出来的代码也很容易被逆向，而虚拟机保护的抗逆向效果好，其原理是在 JavaScript 的执行环境之上再设计构建一个虚拟机，所有原有业务逻辑的 JavaScript 代码均转换为该虚拟机可识别的字节码，复杂度较高效果好。

主要技术专攻点：
1. 业务安全对抗背景
（1） 业务安全背景
（2）恶意分类
（3）图像对抗的脆弱性
2. 前端解决方案
（1）前端数据保护
（2）前端代码保护
（3）字面量混淆
（4）流程混淆
（5）调试检测
3. 执行环境检测 
     Node.js 环境检测
4. 模拟器环境检测
    动态混淆技术